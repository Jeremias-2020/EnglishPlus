    // Generadores de contenido enriquecido
    const synonymData = {
        relentless: [
            {word: "Persistent", note: "Focuses on trying again and again"},
            {word: "Unstoppable", note: "Focuses on the fact that nothing can get in your way"},
            {word: "Tenacious", note: "A very 'fancy' professional word for being like a bulldog‚Äînot letting go"},
            {word: "Incessant", note: "Usually negative, like a noise that won't stop"},
            {word: "Determined", note: "Having a firm purpose or resolve"},
            {word: "Unyielding", note: "Not giving way to pressure or persuasion"}
        ]
    };

    const antonymData = {
        relentless: [
            {word: "Irresolute", note: "Hesitant, not sure of oneself"},
            {word: "Yielding", note: "Giving up easily"},
            {word: "Lazy", note: "Lacking enthusiasm or effort"},
            {word: "Lackadaisical", note: "Without determination or energy"},
            {word: "Merciful", note: "Showing pity‚Äîsometimes 'relentless' means being harsh"},
            {word: "Lenient", note: "Being soft or permissive"}
        ]
    };

    const idiomData = {
        relentless: [
            {phrase: "Relentless pursuit of excellence", meaning: "A classic corporate mission statement"},
            {phrase: "No rest for the wicked", meaning: "A playful idiom used when you have a relentless workload"},
            {phrase: "Keep your foot on the gas", meaning: "A metaphor for maintaining a relentless pace"},
            {phrase: "Never say die", meaning: "Refusing to give up no matter what"},
            {phrase: "Go the extra mile", meaning: "Doing more than expected consistently"}
        ]
    };

    const exampleData = {
        relentless: [
            "The company's relentless focus on customer service made them #1 in the market.",
            "To fix the QuickBooks error, I had to be relentless with the support team until they answered.",
            "Success is the result of relentless preparation meeting opportunity.",
            "Her relentless dedication to the project impressed everyone on the team.",
            "In business, being relentless is what separates good from great."
        ]
    };

    function renderFullAnalysis(data) {
        const word = data.word;
        const upper = word.toUpperCase();
        const phonetic = data.phonetics.find(p => p.text)?.text || "/.../";
        const meanings = data.meanings;
        const isPhrase = word.includes(' ');
        
        let html = `<div class="main-title">Word Analysis: ${upper}</div>`;
        
        // English Meaning (expandido)
        html += `<div class="section-h">English Meaning üá∫üá∏</div>`;
        meanings.forEach(meaning => {
            const pos = meaning.partOfSpeech.toUpperCase();
            meaning.definitions.slice(0, 3).forEach((def, idx) => {
                html += `<p class="body-text">‚Ä¢ <b>${pos}${meaning.definitions.length > 1 ? ' (def. '+(idx+1)+')' : ''}:</b> ${def.definition}</p>`;
                if(def.example) html += `<p class="body-text" style="margin-left:20px; color:#64748b; font-style:italic;">"${def.example}"</p>`;
            });
        });
        
        // Connotation expandida
        html += `<p class="body-text"><b>Connotation:</b> In American English, this is a "high-energy" word. While it can have negative uses (like "relentless rain" or "relentless criticism"), in business and professional settings it is almost always a huge compliment, meaning you have an unstoppable work ethic and refuse-to-lose mentality.</p>`;

        // Phonetics con pronunciaci√≥n simplificada
        function simplifyPhonetic(ipa, word) {
            // Mapeo de s√≠mbolos IPA a pronunciaci√≥n simple
            let simple = ipa
                .replace(/Àà/g, '') // quitar marcas de estr√©s primario
                .replace(/Àå/g, '') // quitar marcas de estr√©s secundario
                .replace(/…™/g, 'i')
                .replace(/iÀê/g, 'ee')
                .replace(/…õ/g, 'e')
                .replace(/√¶/g, 'a')
                .replace(/…ëÀê/g, 'ah')
                .replace(/…í/g, 'o')
                .replace(/…îÀê/g, 'aw')
                .replace(/ ä/g, 'oo')
                .replace(/uÀê/g, 'oo')
                .replace(/ å/g, 'uh')
                .replace(/…ô/g, 'uh')
                .replace(/…úÀê/g, 'ur')
                .replace(/a…™/g, 'eye')
                .replace(/e…™/g, 'ay')
                .replace(/…î…™/g, 'oy')
                .replace(/a ä/g, 'ow')
                .replace(/o ä/g, 'oh')
                .replace(/…™…ô/g, 'eer')
                .replace(/e…ô/g, 'air')
                .replace(/ ä…ô/g, 'oor')
                .replace(/Œ∏/g, 'th')
                .replace(/√∞/g, 'th')
                .replace(/ É/g, 'sh')
                .replace(/ í/g, 'zh')
                .replace(/t É/g, 'ch')
                .replace(/d í/g, 'j')
                .replace(/≈ã/g, 'ng')
                .replace(/j/g, 'y')
                .replace(/w/g, 'w')
                .replace(/r/g, 'r')
                .replace(/l/g, 'l')
                .replace(/[\.]/g, '¬∑');
            
            // Limpiar caracteres no deseados
            simple = simple.replace(/[\/\(\)\[\]]/g, '');
            
            return simple || word.toLowerCase().split('').join('¬∑');
        }
        
        const soundGuide = simplifyPhonetic(phonetic, word);
        
        html += `<div class="section-h">Phonetics & Pronunciation üó£Ô∏è</div>
            <div class="pronunciation-box">
                <div>
                    <span style="font-family:monospace; font-size:1.5rem; color:var(--primary); font-weight:800;">${phonetic}</span><br>
                    <span style="font-family:monospace; font-size:1.8rem; color:var(--secondary); font-weight:800;">/${soundGuide}/</span><br>
                    <p style="margin: 10px 0 0 0; color: #64748b;"><b>Sounds like:</b> ${soundGuide.replace(/¬∑/g, '-')}. (Stress the bolded syllable).</p>
                    ${!isPhrase ? `<p style="margin: 5px 0 0 0; color: #64748b;"><b>Note:</b> In American English, pronounce clearly with confidence for professional impact.</p>` : ''}
                </div>
                <button class="audio-btn" onclick="playAudio('${word}')">üîä</button>
            </div>`;

        // Synonyms (enriquecido)
        const allSyns = meanings.flatMap(m => m.synonyms || []);
        const synList = synonymData[word.toLowerCase()] || allSyns.slice(0, 6).map(s => ({word: s, note: "Similar meaning with slight nuance"}));
        
        if(synList.length > 0 || allSyns.length > 0) {
            html += `<div class="section-h">Synonyms ü§ù (The Nuance Map)</div><p class="body-text">`;
            const finalSyns = synList.length > 0 ? synList : allSyns.slice(0, 6).map(s => ({word: s, note: "Variation with similar meaning"}));
            finalSyns.forEach(syn => {
                const w = typeof syn === 'string' ? syn : syn.word;
                const n = typeof syn === 'string' ? "Similar meaning" : syn.note;
                html += `‚Ä¢ <b>${w.charAt(0).toUpperCase() + w.slice(1)}:</b> ${n}.<br>`;
            });
            html += `</p>`;
        }

        // Antonyms (enriquecido)
        const allAnts = meanings.flatMap(m => m.antonyms || []);
        const antList = antonymData[word.toLowerCase()] || allSyns.slice(0, 6).map(a => ({word: a, note: "Opposite meaning"}));
        
        if(antList.length > 0 || allAnts.length > 0) {
            html += `<div class="section-h">Antonyms üö´</div><p class="body-text">`;
            const finalAnts = antList.length > 0 ? antList : allAnts.slice(0, 6).map(a => ({word: a, note: "Opposite meaning"}));
            finalAnts.forEach(ant => {
                const w = typeof ant === 'string' ? ant : ant.word;
                const n = typeof ant === 'string' ? "Opposite concept" : ant.note;
                html += `‚Ä¢ <b>${w.charAt(0).toUpperCase() + w.slice(1)}:</b> ${n}.<br>`;
            });
            html += `</p>`;
        }

        // Word Family (solo palabras)
        if(!isPhrase) {
            html += `<div class="section-h">Word Family üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div><p class="body-text">`;
            html += `‚Ä¢ <b>${word.charAt(0).toUpperCase() + word.slice(1)}ly</b> (Adverb): How you do something. <i>Example: "He practiced English relentlessly until he was fluent."</i><br>`;
            html += `‚Ä¢ <b>${word.charAt(0).toUpperCase() + word.slice(1)}ness</b> (Noun): The state of being ${word}. <i>Example: "Her relentlessness is the reason she got the promotion."</i><br>`;
            const baseVerb = word.replace(/less$/, '');
            if(baseVerb !== word) {
                html += `‚Ä¢ <b>To ${baseVerb}</b> (Verb/Antonym): To finally give in or become less severe. <i>Example: "The rain finally relented after three days."</i><br>`;
            }
            html += `</p>`;
        }

        // The "Grit" Scale
        html += `<div class="section-h">The "Grit" Scale ‚öñÔ∏è</div>
            <p class="body-text">Understanding where "${upper}" sits compared to similar traits:</p>
            <table class="grit-scale">
                <tr><td><b>Interest</b></td><td>You like the idea.</td></tr>
                <tr><td><b>Effort</b></td><td>You are working on it.</td></tr>
                <tr><td><b>Persistence</b></td><td>You keep going despite mistakes.</td></tr>
                <tr><td><b>${upper}</b></td><td>You have a "refuse to lose" mentality. You find a way or make one.</td></tr>
            </table>`;

        // Idioms & Collocations (expandido)
        const idiomList = idiomData[word.toLowerCase()] || [
            {phrase: `${upper} pursuit of excellence`, meaning: "Common in professional contexts"},
            {phrase: "Push through obstacles", meaning: "Continue despite difficulties"},
            {phrase: "Stay the course", meaning: "Maintain direction and effort"},
            {phrase: "Go all in", meaning: "Commit fully without reservation"}
        ];
        
        html += `<div class="section-h">Idioms & Collocations üó£Ô∏è</div><p class="body-text">`;
        idiomList.forEach(idiom => {
            html += `‚Ä¢ <b>"${idiom.phrase}"</b>: ${idiom.meaning}.<br>`;
        });
        html += `</p>`;

        // Real-World Examples (expandido)
        const exampleList = exampleData[word.toLowerCase()] || [
            `The company's ${word} focus on innovation drove them to market leadership.`,
            `In my career, I've learned that ${word} effort beats talent when talent doesn't work hard.`,
            `Success requires a ${word} commitment to continuous improvement.`,
            `The team showed ${word} dedication throughout the entire project lifecycle.`
        ];
        
        html += `<div class="section-h">Real-World Examples üìù</div><p class="body-text">`;
        exampleList.forEach(ex => {
            html += `‚Ä¢ "${ex}"<br>`;
        });
        html += `</p>`;

        // Friendly Practice (expandido)
        html += `<div class="section-h">Friendly Practice (The American Way) üá∫üá∏</div>
            <p class="body-text">How to use this to "sell yourself" in a professional environment:</p>
            <div class="practice-box">
                <p class="body-text"><b>1. In a Cover Letter:</b><br>
                "I bring a ${word} problem-solving attitude to every challenge I face, ensuring that projects are not just finished, but optimized."</p>
                <p class="body-text"><b>2. During an Interview:</b><br>
                "I'm ${word} when it comes to hitting my KPIs. I don't just stop when I'm tired; I stop when the job is done."</p>
                <p class="body-text"><b>3. In Performance Reviews:</b><br>
                "My ${word} approach to customer satisfaction resulted in a 35% increase in retention rates."</p>
            </div>`;

        // Pro Tip (expandido)
        html += `<div class="pro-tip">
            <b>üí° Tip Pro:</b> Be careful! While being ${word} is great for achieving goals and driving results, being overly ${word} as a manager can lead to team "burnout" and decreased morale. In the U.S., the most respected leaders are those who are ${word} with results but empathetic and supportive with people. Balance is key to sustainable success.
        </div>`;

        document.getElementById('full-analysis').innerHTML = html;
        playAudio(word);
    }
